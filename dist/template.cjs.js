"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return"\x3c!--"+t+"--\x3e"},e=/\s(\S+)\=[\"\']([^\"]*)$/,s=/^([^\"]*)[\"|\'][\s|\>]/,r=function(){function r(t,e){void 0===e&&(e=[]),this.strings=t,this.slots=[],this.prepare(e)}return Object.defineProperty(r.prototype,"html",{get:function(){for(var e="",s=this.strings.length-1,r=0;r<s;r++){var n=this.slots[r],i=n.attr,l=n.value;e+=this.strings[r]+l,null===i&&(e+=t("-"))}return e+this.strings[s]},enumerable:!1,configurable:!0}),r.prototype.prepare=function(r){for(var n=0,i=this.strings.length-1,l=0;l<i;l++){var o=this.strings[l],a=r[l],u=e.exec(o);if(null!==u){var h=o.lastIndexOf("<");if(-1!=h&&n++,0===h)this.strings[l]=t(n)+o;else if(h>0){var c=o.substring(0,h-1),p=o.substring(h);this.strings[l]=c+t(n)+p}var g=u[1],d=u[2],f=this.strings[l].length-d.length;this.strings[l]=this.strings[l].slice(0,f);for(var v="",m=this.strings[l+1],x=s.exec(m);null===x;)v+=m+r[l+1],this.strings.splice(l+1,1),r.splice(l+1,1),i--,m=this.strings[l+1],x=s.exec(m);var N=x[1];this.strings[l+1]=m.slice(N.length),this.slots.push({slotIndex:n,attr:g,value:d+a+v+N})}else n++,this.strings[l]=o+t(n),this.slots.push({slotIndex:n,attr:null,value:a})}},r}(),n=function(t){var e=t.nodeType,s=t.nodeValue;return e===Node.COMMENT_NODE&&parseInt(s)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},i=function(){function t(t,e){this.template=t,this.container=e}return t.prototype.render=function(){var t=document.createTreeWalker(this.container,NodeFilter.SHOW_COMMENT,{acceptNode:n},!1),e=t.nextNode();if(null!==e)for(;e;){var s=e.nodeValue,r=parseInt(s);this.commitNode(e.nextSibling,r),e=t.nextNode()}else{var i=document.createRange().createContextualFragment(this.template.html);this.container.appendChild(i)}},t.prototype.commitNode=function(t,e){for(var s=this.template.slots.length,r=0;r<s;r++){if(this.template.slots[r].slotIndex===e){var n=this.template.slots[r],i=n.attr,l=n.value;if(null!==i)t.getAttribute(i)!==l&&t.setAttribute(i,l);else t.nodeValue!=l&&(t.nodeValue=l)}}},t}();exports.Template=r,exports.html=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];return new r(t.raw.slice(0),e)},exports.render=function(t,e){return new i(t,e).render()};
