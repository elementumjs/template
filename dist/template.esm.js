var t=function(t){return"\x3c!--"+t+"--\x3e"},e=/\s(\S+)\=[\"\']([^\"]*)$/,n=/^([^\"]*)[\"|\'][\s|\>]/,r=function(){function r(t,e){void 0===e&&(e=[]),this.strings=t,this.slots=[],this.prepare(e)}return Object.defineProperty(r.prototype,"html",{get:function(){for(var e="",n=this.strings.length-1,r=0;r<n;r++){var s=this.slots[r],i=s.attr,o=s.value;e+=this.strings[r]+o,null===i&&(e+=t("-"))}return e+this.strings[n]},enumerable:!1,configurable:!0}),r.prototype.prepare=function(r){for(var s=0,i=this.strings.length-1,o=0;o<i;o++){var l=this.strings[o],a=r[o];if("function"==typeof a){var u=a.name;if(""===u){throw new Error('injected functions cannot be inlined.Please define the function outside and reference it by its name. Ex.: <button onclick="${fn}">')}a=u+"()"}var c=e.exec(l);if(null!==c){var h=l.lastIndexOf("<");if(-1!=h&&s++,0===h)this.strings[o]=t(s)+l;else if(h>0){var d=l.substring(0,h-1),f=l.substring(h);this.strings[o]=d+t(s)+f}var p=c[1],g=c[2],v=this.strings[o].length-g.length;this.strings[o]=this.strings[o].slice(0,v);for(var m="",N=this.strings[o+1],x=n.exec(N);null===x;)m+=N+r[o+1],this.strings.splice(o+1,1),r.splice(o+1,1),i--,N=this.strings[o+1],x=n.exec(N);var E=x[1];this.strings[o+1]=N.slice(E.length),this.slots.push({slotIndex:s,attr:p,value:g+a+m+E})}else s++,this.strings[o]=l+t(s),this.slots.push({slotIndex:s,attr:null,value:a})}},r}(),s=function(t){var e=t.nodeType,n=t.nodeValue;return e===Node.COMMENT_NODE&&parseInt(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},i=function(){function t(t,e){this.template=t,this.container=e}return t.prototype.render=function(){var t=document.createNodeIterator(this.container,NodeFilter.SHOW_COMMENT,{acceptNode:s}),e=t.nextNode();if(null!==e)for(;e;){var n=e.nodeValue,r=parseInt(n);this.commitNode(e.nextSibling,r),e=t.nextNode()}else{var i=document.createRange().createContextualFragment(this.template.html);this.container.appendChild(i)}},t.prototype.commitNode=function(t,e){for(var n=this.template.slots.length,r=0;r<n;r++){if(this.template.slots[r].slotIndex===e){var s=this.template.slots[r],i=s.attr,o=s.value;if(null!==i)t.getAttribute(i)!==o&&t.setAttribute(i,o);else t.nodeValue!==o&&(t.nodeType!==Node.COMMENT_NODE?t.nodeValue=o:t.parentNode.insertBefore(document.createTextNode(o),t))}}},t}(),o=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new r(t.raw.slice(0),e)},l=function(t,e){return new i(t,e).render()};export{r as Template,o as html,l as render};
