!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Template={})}(this,(function(e){"use strict";var t=function(e){return"\x3c!--"+e+"--\x3e"},n=/\s(\S+)\=[\"\']([^\"]*)$/,s=/^([^\"]*)[\"|\'][\s|\>]/,i=function(){function e(e,t){void 0===t&&(t=[]),this.strings=e,this.slots=[],this.prepare(t)}return Object.defineProperty(e.prototype,"html",{get:function(){for(var e="",n=this.strings.length-1,s=0;s<n;s++){var i=this.slots[s],r=i.attr,o=i.value;e+=this.strings[s]+o,null===r&&(e+=t("-"))}return e+this.strings[n]},enumerable:!1,configurable:!0}),e.prototype.prepare=function(e){for(var i=0,r=this.strings.length-1,o=0;o<r;o++){var l=this.strings[o],a=e[o];if("function"==typeof a){var u=a.name;if(""===u){throw new Error('injected functions cannot be inlined.Please define the function outside and reference it by its name. Ex.: <button onclick="${fn}">')}a=u+"()"}var c=n.exec(l);if(null!==c){var f=l.lastIndexOf("<");if(-1!=f&&i++,0===f)this.strings[o]=t(i)+l;else if(f>0){var d=l.substring(0,f-1),h=l.substring(f);this.strings[o]=d+t(i)+h}var p=c[1],g=c[2],v=this.strings[o].length-g.length;this.strings[o]=this.strings[o].slice(0,v);for(var m="",x=this.strings[o+1],N=s.exec(x);null===N;)m+=x+e[o+1],this.strings.splice(o+1,1),e.splice(o+1,1),r--,x=this.strings[o+1],N=s.exec(x);var b=N[1];this.strings[o+1]=x.slice(b.length),this.slots.push({slotIndex:i,attr:p,value:g+a+m+b})}else i++,this.strings[o]=l+t(i),this.slots.push({slotIndex:i,attr:null,value:a})}},e}(),r=function(e){var t=e.nodeType,n=e.nodeValue;return t===Node.COMMENT_NODE&&parseInt(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},o=function(){function e(e,t){this.template=e,this.container=t}return e.prototype.render=function(){var e=document.createNodeIterator(this.container,NodeFilter.SHOW_COMMENT,{acceptNode:r}),t=e.nextNode();if(null!==t)for(;t;){var n=t.nodeValue,s=parseInt(n);this.commitNode(t.nextSibling,s),t=e.nextNode()}else{var i=document.createRange().createContextualFragment(this.template.html);this.container.appendChild(i)}},e.prototype.commitNode=function(e,t){for(var n=this.template.slots.length,s=0;s<n;s++){if(this.template.slots[s].slotIndex===t){var i=this.template.slots[s],r=i.attr,o=i.value;if(null!==r)e.getAttribute(r)!==o&&e.setAttribute(r,o);else e.nodeValue!==o&&(e.nodeType!==Node.COMMENT_NODE?e.nodeValue=o:e.parentNode.insertBefore(document.createTextNode(o),e))}}},e}();e.Template=i,e.html=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new i(e.raw.slice(0),t)},e.render=function(e,t){return new o(e,t).render()},Object.defineProperty(e,"__esModule",{value:!0})}));
