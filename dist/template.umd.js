!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Template={})}(this,(function(t){"use strict";var e=function(t){return"\x3c!--"+t+"--\x3e"},n=/\s(\S+)\=[\"\']([^\"]*)$/,s=/^([^\"]*)[\"|\'][\s|\>]/,r=function(){function t(t,e){void 0===e&&(e=[]),this.strings=t,this.slots=[],this.prepare(e)}return Object.defineProperty(t.prototype,"html",{get:function(){for(var t="",n=this.strings.length-1,s=0;s<n;s++){var r=this.slots[s],i=r.attr,o=r.value;t+=this.strings[s]+o,null===i&&(t+=e("-"))}return t+this.strings[n]},enumerable:!0,configurable:!0}),t.prototype.prepare=function(t){for(var r=0,i=this.strings.length-1,o=0;o<i;o++){var l=this.strings[o],a=t[o],u=n.exec(l);if(null!==u){var h=l.lastIndexOf("<");if(-1!=h&&r++,0===h)this.strings[o]=e(r)+l;else if(h>0){var c=l.substring(0,h-1),f=l.substring(h);this.strings[o]=c+e(r)+f}var d=u[1],p=u[2],g=this.strings[o].length-p.length;this.strings[o]=this.strings[o].slice(0,g);for(var v="",m=this.strings[o+1],x=s.exec(m);null===x;)v+=m+t[o+1],this.strings.splice(o+1,1),t.splice(o+1,1),i--,m=this.strings[o+1],x=s.exec(m);var N=x[1];this.strings[o+1]=m.slice(N.length),this.slots.push({slotIndex:r,attr:d,value:p+a+v+N})}else r++,this.strings[o]=l+e(r),this.slots.push({slotIndex:r,attr:null,value:a})}},t}(),i=function(t){var e=t.nodeType,n=t.nodeValue;return e===Node.COMMENT_NODE&&parseInt(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},o=function(){function t(t,e){this.template=t,this.container=e}return t.prototype.render=function(){var t=document.createTreeWalker(this.container,NodeFilter.SHOW_COMMENT,{acceptNode:i},!1),e=t.nextNode();if(null!==e)for(;e;){var n=e.nodeValue,s=parseInt(n);this.commitNode(e.nextSibling,s),e=t.nextNode()}else{var r=document.createRange().createContextualFragment(this.template.html);this.container.appendChild(r)}},t.prototype.commitNode=function(t,e){for(var n=this.template.slots.length,s=0;s<n;s++){if(this.template.slots[s].slotIndex===e){var r=this.template.slots[s],i=r.attr,o=r.value;if(null!==i)t.getAttribute(i)!==o&&t.setAttribute(i,o);else t.nodeValue!=o&&(t.nodeValue=o)}}},t}();t.html=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new r(t.raw.slice(0),e)},t.render=function(t,e){return new o(t,e).render()},Object.defineProperty(t,"__esModule",{value:!0})}));
