!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Template={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function s(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}var r=function(e){return"\x3c!--".concat(e,"--\x3e")},i=/\s(\S+)\=[\"\']([^\"]*)$/,o=/^([^\"]*)[\"|\'][\s|\>]/,a=function(){function e(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t(this,e),this.strings=n.raw.slice(0),this.slots=[],this.prepare(s)}return s(e,[{key:"prepare",value:function(e){for(var t=0,n=this.strings.length-1,s=0;s<n;s++){var a=this.strings[s],l=e[s],u=i.exec(a);if(null!==u){var c=a.lastIndexOf("<");if(-1!=c&&t++,0===c)this.strings[s]=r(t)+a;else if(c>0){var h=a.substring(0,c-1),f=a.substring(c);this.strings[s]=h+r(t)+f}var d=u[1],g=u[2],v=this.strings[s].length-g.length;this.strings[s]=this.strings[s].slice(0,v);for(var p="",m=this.strings[s+1],x=o.exec(m);!x;)p+=m+e[s+1],this.strings.splice(s+1,1),e.splice(s+1,1),n--,m=this.strings[s+1],x=o.exec(m);var y=x[1];this.strings[s+1]=m.slice(y.length),this.slots.push({slotIndex:t,attr:d,value:g+l+p+y})}else t++,this.strings[s]=a+r(t),this.slots.push({slotIndex:t,value:l})}}},{key:"html",get:function(){for(var e="",t=this.strings.length-1,n=0;n<t;n++){var s=this.slots[n],i=s.attr,o=s.value;e+=this.strings[n]+o,void 0===i&&(e+=r("-"))}return e+this.strings[t]}}]),e}(),l=function(e){var t=e.nodeType,n=e.nodeValue;return t===Node.COMMENT_NODE&&!!parseInt(n)},u=function(){function e(n,s){t(this,e),this.template=n,this.container=s}return s(e,[{key:"render",value:function(){var e=document.createTreeWalker(this.container,NodeFilter.SHOW_COMMENT,{acceptNode:l},!1),t=e.nextNode();if(null!==t)for(;t;){var n=t.nodeValue,s=parseInt(n);this.commitNode(t.nextSibling,s),t=e.nextNode()}else{var r=document.createRange().createContextualFragment(this.template.html);this.container.appendChild(r)}}},{key:"commitNode",value:function(e,t){for(var n=this.template.slots.length,s=0;s<n;s++){if(this.template.slots[s].slotIndex===t){var r=this.template.slots[s],i=r.attr,o=r.value;if(void 0!==i)e.getAttribute(i)!==o&&e.setAttribute(i,o);else e.nodeValue!=o&&(e.nodeValue=o)}}}}]),e}();e.html=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return new a(e,n)},e.render=function(e,t){return new u(e,t).render()},Object.defineProperty(e,"__esModule",{value:!0})}));
